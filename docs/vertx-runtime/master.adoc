include::topics/templates/document-attributes.adoc[]

//override for a cleaner TOC
:toclevels: 2
:vert-x:

= {vertx-runtime-guide-name}
:runtime: {VertX}
//var for front-end topics, if below is defined in topic, its used in docs, if not its used in the front end
:docs-topic:

:context: vertx

This guide covers concepts as well as practical details needed by developers to use the {VertX} runtime.

include::topics/con_vertx-runtime-details.adoc[leveloffset=+1]

// include::topics/runtime-info-product-version.adoc[leveloffset=+1]
// include::topics/runtime-info-community-version.adoc[leveloffset=+1]

//runtime information modules
include::topics/con_key-vertx-concepts.adoc[leveloffset=+2]

//include::topics/ref_community-and-product-versions-of-vertx.adoc[leveloffset=+2]

// duplicates the release notes
// include::topics/ref_vertx-components-available-as-a-technology-preview.adoc[leveloffset=+2]

include::topics/configuring-vertx.adoc[leveloffset=+2]

// agroal bit goes here
include::topics/proc_configuring-your-vertx-application-to-use-agroal.adoc[leveloffset=+2]

// MISSIONS
include::topics/con_missions-and-cloud-native-development-on-openshift.adoc[leveloffset=+1]

[[vertx-available-missions-and-boosters]]
== Available Missions and Boosters for {Vertx}

The following boosters are available for {Vertx}.


// REST API
:context: rest-api
:parameter-runtime: vertx
include::topics/assembly_http-api-mission-booster.adoc[leveloffset=+2]


// CONFIGMAP
:context: configmap
:parameter-runtime: vertx
include::topics/assembly_configmap-mission-booster.adoc[leveloffset=+2]


// CRUD
:context: crud
:parameter-runtime: vertx
include::topics/assembly_crud-mission-booster.adoc[leveloffset=+2]


// HEALTH CHECK
[[mission-health-check-vertx]]
=== {mission-health-check-vertx-guide-name}
:health-check-vertx:
:context: health-check

include::topics/health-check-mission-intro-paragraph.adoc[leveloffset=+3]

NOTE: If you are not familiar with the health check terminology, see the xref:health-check-concepts_{context}[] section first.

The purpose of this use case is to demonstrate the health check pattern through the use of probing. Probing is used to report the liveness and readiness of an application. In this use case, you configure an application which exposes an HTTP `health` endpoint to issue HTTP requests. If the container is alive, according to the liveness probe on the `health` HTTP endpoint, the management platform receives `200` as return code and no further action is required. If the `health` HTTP endpoint does not return a response, for example if the thread is blocked, then the application is not considered alive according to the liveness probe. In that case, the platform kills the pod corresponding to that application and recreates a new pod to restart the application.

This use case also allows you to demonstrate and use a readiness probe. In cases where the application is running but is unable to handle requests, such as when the application returns an HTTP `503` response code during restart, this application is not considered ready according to the readiness probe. If the application is not considered ready by the readiness probe, requests are not routed to that application until it is considered ready according to the readiness probe.

include::topics/con_health-check-concepts.adoc[leveloffset=+3]

include::topics/note-preview-booster-source.adoc[leveloffset=+3]

:parameter-mission-name: {name-mission-health-check}
:parameter-mission: health-check
include::topics/assembly_deploying-the-booster-to-openshiftonline.adoc[leveloffset=+3]

include::topics/assembly_deploying-the-booster-to-openshiftlocal.adoc[leveloffset=+3]
:parameter-mission!:

include::topics/proc_deploying-the-booster-to-openshiftcontainerplatform.adoc[leveloffset=+3]

include::topics/health-check-mission-basic-interaction-vertx.adoc[leveloffset=+3]

include::topics/proc_running-the-booster-integration-tests.adoc[leveloffset=+3]
:parameter-mission-name!:

include::topics/ref_health-check-resources.adoc[leveloffset=+3]

:health-check-vertx!:


// CIRCUIT BREAKER
[[mission-circuit-breaker-vertx]]
=== {mission-circuit-breaker-vertx-guide-name}
:circuit-breaker-vertx:
:context: circuit-breaker

include::topics/note-booster-unvailable-oso.adoc[leveloffset=+3]

include::topics/circuit-breaker-mission-intro-paragraph.adoc[leveloffset=+3]

This mission shows you how to implement a Circuit Breaker and Fallback pattern in your services.

include::topics/con_about-circuit-breaker.adoc[leveloffset=+3]

include::topics/note-preview-booster-source.adoc[leveloffset=+3]

include::topics/con_circuit-breaker-design-tradeoffs.adoc[leveloffset=+3]

:parameter-mission-name: {name-mission-circuit-breaker}
:parameter-mission: circuit-breaker
include::topics/assembly_deploying-the-booster-to-openshiftonline.adoc[leveloffset=+3]

include::topics/assembly_deploying-the-booster-to-openshiftlocal.adoc[leveloffset=+3]
:parameter-mission!:

include::topics/proc_deploying-the-booster-to-openshiftcontainerplatform.adoc[leveloffset=+3]

include::topics/proc_interacting-with-the-circuit-breaker-booster.adoc[leveloffset=+3]

include::topics/circuit-breaker-mission-access-hystrix-dashboard-vertx.adoc[leveloffset=+3]

include::topics/proc_running-the-booster-integration-tests.adoc[leveloffset=+3]
:parameter-mission-name!:

include::topics/ref_circuit-breaker-resources.adoc[leveloffset=+3]

:circuit-breaker-vertx!:


// SECURED
[[mission-rest-http-secured-vertx]]
=== {mission-secured-vertx-guide-name}
:secured-vertx-mission:
:context: secured

include::topics/note-booster-unvailable-oso.adoc[leveloffset=+3]

include::topics/secured-mission-intro-paragraph-missions.adoc[leveloffset=+3]

include::topics/note-preview-booster-source.adoc[leveloffset=+3]

include::topics/secured-mission-intro.adoc[leveloffset=+3]

include::topics/secured-mission-vertx-adapter.adoc[leveloffset=+4]

include::topics/assembly_deploying-the-secured-booster-to-openshiftlocal.adoc[leveloffset=+3]

include::topics/assembly_deploying-the-secured-booster-to-openshiftcontainerplatform.adoc[leveloffset=+3]

include::topics/assembly_authenticating-to-the-secured-booster-api-endpoint.adoc[leveloffset=+3]

include::topics/proc_running-the-secured-booster-integration-tests-on-vertx.adoc[leveloffset=+3]

include::topics/ref_secured-sso-resources.adoc[leveloffset=+3]

:secured-vertx-mission!:


// CACHING
[[mission-cache-vertx]]
=== {mission-cache-vertx-guide-name}
:cache-vertx:
:context: cache

include::topics/note-booster-unvailable-oso.adoc[leveloffset=+3]

Mission proficiency level: xref:proficiency_advanced[*{proficiency-advanced}*].

The {name-mission-cache} mission demonstrates how to use a cache to increase the response time of applications.

This mission shows you how to:

* Deploy a cache to OpenShift.
* Use a cache within an application.

include::topics/con_about-caching.adoc[leveloffset=+3]

include::topics/note-preview-booster-source.adoc[leveloffset=+3]

:parameter-mission-name: {name-mission-cache}
:parameter-mission: cache
include::topics/assembly_deploying-the-booster-to-openshiftonline.adoc[leveloffset=+3]

include::topics/assembly_deploying-the-booster-to-openshiftlocal.adoc[leveloffset=+3]
:parameter-mission!:

include::topics/proc_deploying-the-booster-to-openshiftcontainerplatform.adoc[leveloffset=+3]

include::topics/cache-mission-basic-interaction.adoc[leveloffset=+3]

include::topics/proc_running-the-booster-integration-tests.adoc[leveloffset=+3]
:parameter-mission-name!:

include::topics/ref_caching-resources.adoc[leveloffset=+3]

:cache-vertx!:

== Application Development
//creating an app from scratch
//TODO:
//Building blocks
//Minimum Viable App
//Add-ons
//Building your app

//creating an app from scratch

// workaround to resolve ID conflicts:
:context: vert-x
:parameter-runtime: vertx
include::topics/assembly_creating-a-basic-vertx-application.adoc[leveloffset=+2]

include::topics/proc_deploying-an-existing-application-to-openshift.adoc[leveloffset=+2]
:parameter-runtime!:

== Debugging

This sections contains information about debugging your {VertX}{ndash}based application both in local and remote deployments.

=== Remote Debugging

To remotely debug an application, you must first configure it to start in a debugging mode, and then attach a debugger to it.


:parameter-debug-property: debug.port
:parameter-maven-goal: vertx:debug
include::topics/proc_starting-your-application-locally-in-debugging-mode.adoc[leveloffset=+3]
:parameter-debug-property!:
:parameter-maven-goal!:

//:parameter-uberjar-documented:
//include::topics/proc_starting-an-uberjar-in-debugging-mode.adoc[leveloffset=+3]
//:parameter-uberjar-documented!:

:env-var-name: JAVA_DEBUG
:env-var-val: true
:port: 5005
:nodejs!:
include::topics/proc_starting-your-application-on-openshift-in-debugging-mode.adoc[leveloffset=+3]

include::topics/proc_attaching-a-remote-debugger-to-the-application.adoc[leveloffset=+3]

=== Debug Logging

{VertX} provides a built-in logging API.
The default logging implementation for {VertX} uses the `java.util.logging` library that is link:https://docs.oracle.com/javase/8/docs/api/java/util/logging/package-summary.html[provided with the Java JDK^].
Alternatively, {VertX} allows you to use a different logging framework, for example, link:https://logging.apache.org/log4j/2.x/javadoc.html[_Log4J_^] ({VertX} supports Log4J v1 and v2) or link:https://www.slf4j.org/docs.html[_SLF4J_^].

include::topics/proc_configuring-jul-logging-vertx.adoc[leveloffset=+3]

include::topics/proc_add-debug-logging-to-app-vertx.adoc[leveloffset=+3]

include::topics/proc_specify-a-custom-logging-framework-vertx.adoc[leveloffset=+3]

// netty logging
include::topics/proc_configure-netty-logging-vertx.adoc[leveloffset=+3]

:context: vertx
include::topics/proc_accessing-debug-logs-on-openshift.adoc[leveloffset=+3]


// Troubleshooting? TBD

== Monitoring

This section contains information about monitoring your {VertX}{ndash}based application running on OpenShift.

=== Accessing JVM metrics for your application on OpenShift

include::topics/proc_accessing-jvm-metrics-using-jolokia-on-openshift.adoc[leveloffset=+3]

[appendix]
include::topics/ref_the-source-to-image-s2i-build-process.adoc[leveloffset=+1]

:context: vertx
[appendix]
include::topics/proc_updating-the-deployment-configuration-of-a-booster.adoc[leveloffset=+1]

//[appendix]
//include::topics/ref_breakdown-of-vertx-pom-components.adoc[leveloffset=+1]

[appendix]
include::topics/ref_additional-vertx-resources.adoc[leveloffset=+1]

[appendix]
include::topics/ref_application-development-resources.adoc[leveloffset=+1]

[appendix]
include::topics/ref_proficiency-levels.adoc[leveloffset=+1]

[appendix]
include::topics/ref_glossary.adoc[leveloffset=+1]
